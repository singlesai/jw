"use strict";(self["webpackChunktico_yt_mobile"]=self["webpackChunktico_yt_mobile"]||[]).push([[511],{4511:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=a(537),n=a(5380);function s(t,e,a,s,r,o){const c=(0,i.up)("van-icon"),l=(0,i.up)("van-nav-bar"),h=(0,i.up)("van-search"),d=(0,i.up)("van-tag"),u=(0,i.up)("van-button"),p=(0,i.up)("van-card"),k=(0,i.up)("van-divider"),_=(0,i.up)("van-action-sheet");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{title:"退货计划",onClickRight:o.onClickRight},{right:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"ellipsis",size:"18"})])),_:1},8,["onClickRight"]),(0,i.Wm)(h,{modelValue:r.strFilter,"onUpdate:modelValue":e[0]||(e[0]=t=>r.strFilter=t),"aria-placeholder":"请输入搜索关键词","show-action":"",onSearch:o.onSearch,onCancel:o.onCancel},null,8,["modelValue","onSearch","onCancel"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.data,((t,e)=>((0,i.wg)(),(0,i.j4)(p,{key:e,num:t.stock_return_plan_line.length,title:t.name,desc:t.project_id[1]},{tags:(0,i.w5)((()=>[t.stock_id[1]?((0,i.wg)(),(0,i.j4)(d,{key:0,plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.stock_id[1]),1)])),_:2},1024)):(0,i.kq)("",!0),t.partner_id[1]?((0,i.wg)(),(0,i.j4)(d,{key:1,plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.partner_id[1]),1)])),_:2},1024)):(0,i.kq)("",!0),t.sale_id[1]?((0,i.wg)(),(0,i.j4)(d,{key:2,plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.sale_id[1]),1)])),_:2},1024)):(0,i.kq)("",!0)])),footer:(0,i.w5)((()=>[(0,i.Wm)(u,{size:"mini",onClick:e=>o.onAddDest(t.id)},{default:(0,i.w5)((()=>[(0,i.Uk)("现场签收")])),_:2},1032,["onClick"])])),_:2},1032,["num","title","desc"])))),128)),!1===r.right?((0,i.wg)(),(0,i.j4)(k,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("无权限")])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(_,{show:r.showAct,"onUpdate:show":e[1]||(e[1]=t=>r.showAct=t),actions:r.actions,onSelect:o.onAct},null,8,["show","actions","onSelect"])])}a(6513);var r=a(8875),o=a(1552),c=a(4144),l=a(2420),h={name:"purOrd",data(){return{right:!1,showAct:!1,strFilter:"",data:[],actions:[{name:"历史签收"},{name:"退出登录"}]}},mounted(){this.onSearch()},methods:{async onSearch(){r.F.loading({forbidClick:!0,duration:0});try{if(this.right=await l.Z.model("stock.return.plan").checkAccessRights(),this.right){var t=[];t.push(["approval_state","=","approval_confirm"]),this.strFilter&&(t.push("|"),t.push(["name","ilike",this.strFilter]),t.push("|"),t.push(["project_id","ilike",this.strFilter]),t.push(["stock_id.name","ilike",this.strFilter])),this.data=await l.Z.model("stock.return.plan").searchRead(t,["name","partner_id","project_id","stock_id","sale_id","stock_return_plan_line"],0,100,"create_date desc");var e=[];for(var a in this.data)e=e.concat(this.data[a].order_line)}r.F.clear()}catch(i){r.F.clear(),r.F.fail(i.message||i)}},onClickRight(){this.showAct=!0},onAct(t){switch(t.name){case"历史签收":this.$router.push("./sendlist");break;case"退出登录":o.V.confirm({title:"退出",message:"确定退出登录？"}).then((()=>{this.$router.push({name:"Login"})})).catch((()=>{}));break}},onAddDest(t){var e=(0,c.$o)("user");e.isCust?this.$router.push("./recrec?sid="+t):this.$router.push("./sendrec?sid="+t),console.log(t)},onCancel(){this.strFilter=""}}},d=a(3169);const u=(0,d.Z)(h,[["render",s]]);var p=u}}]);
//# sourceMappingURL=511.035b3f93.js.map